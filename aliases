# -*- sh -*-

if [ -e ~/.dircolors ]; then
    DIRCOLORS_OPTS="$HOME/.dircolors"
fi

if [ $OS_TYPE = 'linux' ]; then
    DIRCOLORS='dircolors'
    LS='/bin/ls'
elif [ $OS_TYPE = 'darwin' ]; then
    DIRCOLORS='/opt/local/bin/dircolors'
    LS='/opt/local/bin/ls'
else
    unset DIRCOLORS
fi

if [ -n $DIRCOLORS ]; then
    eval `$DIRCOLORS $DIRCOLORS_OPTS`
    alias ls='LC_ALL=C $LS --color=auto --classify'
fi

alias ack='ACK_PAGER_COLOR="less -x4SrFX" ack -a'

alias cp="cp -i"
alias find-common="history | awk {'print \$2'} | sort | uniq -c | sort -k1 -nr | head -n 25"
alias grep='grep --color=auto'
alias mv="mv -i"
alias rm="rm -i"

alias jm='cd $(emacsclient -e "(with-current-buffer (window-buffer (frame-selected-window)) default-directory)" | '"sed -E 's/(^\")|(\"$)//g')"

alias prune="git remote prune origin"
alias list_installed_perl_modules="perl -MExtUtils::Installed -E 'say for ExtUtils::Installed->new->modules'"

alias start_tunnel="stop_tunnel ; ssh -f -N tunnel"
alias stop_tunnel="kill \`ps ax | grep [t]unnel | cut -f1 -d' '\` 2>/dev/null"

alias vi="vim"
alias view="vim -R"

alias proveall='prove -j9 --state=slow,save -lr t'
alias upgrade_cpan_modules="cpan-outdated --mirror file:///opt/minicpan | cpanm --mirror file:///opt/minicpan --mirror-only"
